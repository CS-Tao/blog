---
title: 关系数据库中的范式
date: 2017-12-19 20:20:31
categories: 技术相关
tags: [数据库]
reward: true
---

最近在复习备考《空间数据库》的时候，偶然发现了范式（Normal Form）这一词语，才意识到，当初数据库课上的内容已经忘得差不多了。

关系数据库的范式是对数据库中关系模式标准级别的描述，符合高一级的范式的关系模式一定符合低一级的范式。目前关系模式的范式一共分为8个级别，由低到高依次为第一范式（1NF），第二范式（2NF），第三范式（3NF），巴斯-科德范式（BCNF），第四范式（4NF），第五范式（5NF，又称完美范式），DK范式，第六范式（目前最高的范式）。我们一般的数据库满足第三范式即可。本文对第一范式到第五范式做一点简单的记录。
<!-- more -->
<The rest of contents | 余下全文>

# 第一范式（1NF）

属性不可再分，即所有属性均具有原子性。

它的一个必要条件是属性定长。

# 第二范式（2NF）

在满足第一范式的基础上，需满足该关系模式必须有主键，而且所有的非主属性不能部分依赖于主键。

主键由一个或多个主属性（即多列）组成，其他所有属性必须由主键的所有属性唯一确定，不能存在由主键的某部分属性便能确定的列，即非主属性必须完全依赖于主键。

>比如，高中我在班上的学号为13，如果有一张表
>
>|班级|学号|姓名|班主任|
>|:-:|:-:|:-:|:-:|
>|-|-|-|-|
>
>这张表的主键为（班级，学号），那么我们可以看到，[姓名]由[班级]和[学号]唯一确定是没问题的，而且仅由[班级]或[学号]是无法确定姓名的，然而[班主任]却只由[班级]唯一确定，即[班主任]仅部分依赖于主键（班级，学号），不符合第二范式。应将原表拆分为
>
>|班级|学号|姓名|
>|:-:|:-:|:-:|
>|-|-|-|
>
>和
>
>|班级|班主任|
>|:-:|:-:|
>|-|-|

# 第三范式（3NF）

在满足第二范式的基础上，需满足非主属性不传递依赖于主键。

非主属性不能完全依赖于另外一个或多个非主属性，也就是说，非主属性必须完全依赖于主键，而不是通过其他非主属性传递依赖于主键。

>比如，我大学在学校的学号为123456789，如果有一张表
>
>|学号|院系|班级|姓名|班主任|
>|:-:|:-:|:-:|:-:|:-:|
>|-|-|-|-|-|
>
>这张表的主键为[学号]，[班主任]依赖于[院系]和[班级]，由于[院系]和[班级]不是主属性，所以该关系模式不符合第三范式。应将原表拆分为
>
>|学号|院系|班级|姓名|
>|:-:|:-:|:-:|:-:|
>|-|-|-|-|
>
>和
>
>|院系|班级|班主任|
>|:-:|:-:|:-:|
>|-|-|-|

# 巴斯-科德范式（BCNF）

在满足第三方式的基础上，需满足任何属性不传递依赖于主键。

与第三范式对比我们可以发现，第三方式只对非主属性做了约束，而BC范式对所有属性做了约束。所有属性不能完全依赖于其他一个或多个非主属性，所有属性必须完全依赖于主键，不能通过其他非主属性传递依赖于主键。

>如下表，其中学号为某一研究方向下的学号，一个研究方向下有多位导师
>
>|研究方向|学生学号|导师|平均成绩|
>|:-:|:-:|:-:|:-:|
>|-|-|-|-|
>
>主键为[研究方向]和[学号]。导师需要由[研究方向]和该方向下的[学生学号]确定，平均成绩也需要[研究方向]和[学生学号]确定，满足第二范式。非主属性[导师]和[平均成绩]没有依赖关系，满足第三范式。但主属性[研究方向]依赖于[导师]，当[导师]确定了，[研究方向]也就确定了。换句话说，属性[研究方向]完全依赖于非主属性[导师]，不符合BC范式。原表应拆分为
>
>|研究方向|学生学号|平均成绩|
>|:-:|:-:|:-:|
>|-|-|-|
>
>和
>
>|导师|研究方向|
>|:-:|:-:|
>|-|-|

# 第四范式（4NF）

在满足BC范式的基础上，关系模型不能存在多值依赖。

多值依赖是指如果给定了A属性，B、C两个属性就得确定。那么如果A确定了，但B未确定，就不能插入数据。第四方式规定关系模型中不能出现多值依赖的情况。

# 第五范式（5NF，完美范式）

在满足第四范式的基础上，需将表分解为逻辑上不同主键的表。主要是为了排除表中的所有冗余。

第五范式消除了第四范式表的连接依赖。